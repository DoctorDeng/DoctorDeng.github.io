---
layout: post
title: JaveEE 面试知识整理
categories: [java, 面试]
description: 介绍一些Jsp、Servlet的知识
keywords: java, 面试
---

介绍一些Jsp、Servlet的知识

## 1、Servlet接口五种方法介绍。
1.`init()`

在Servlet实例化后，Servlet 容器会调用 init() 方法来初始化该对象，主要是为了让 Servlet 对象在处理客户请求前可以完成一些初始化工作，例如：建立数据库的连接，获取配置信息等。对于每一个 Servlet 实例，init() 方法只能被调用一次。init() 方法有一个类型为ServletConfig的参数，Servlet 容器通过这个参数向 Servlet 传递配置信息。Servlet 使用 ServletConfig 对象从 Web 应用程序的配置信息中获取以名-值对形式提供的初始化参数。另外，在 Servlet 中，还可以通过 ServletConfig 对象获取描述 Servlet 运行环境的 ServletContext 对象，使用该对象，Servlet 可以和它的 Servlet 容器进行通信.

2.`service()`

容器调用 service() 方法来处理客户端的请求。要注意的是，在 service() 方法被容器调用之前，必须确保 init() 方法正确完成。容器会构造一个表示客户端请求信息的请求对象（类型为 ServletRequest）和一个用于对客户端进行响应的响应对象（类型为 ServletResponse）作为参数传递给 service()。在 service() 方法中，Servlet 对象通过 ServletRequest 对象得到客户端的相关信息和请求信息，在对请求进行处理后，调用 ServletResponse 对象的方法设置响应信息.

3.`destroy()`

当容器检测到一个 Servlet 对象应该从服务中被移除的时候，容器会调用该对象的 destroy()方法，以便让Servlet对象可以释放它所使用的资源，保存数据到持久存储设备中，例如将内存中的数据保存到数据库中，关闭数据库的连接等。当需要释放内存或者容器关闭时，容器就会调用 Servlet 对象的 destroy() 方法，在 Servlet 容器调用 destroy() 方法前，如果还有其他的线程正在 service() 方法中执行容器会等待这些线程执行完毕或者等待服务器设定的超时值到达。一旦 Servlet 对象的 destroy() 方法被调用，容器不回再把请求发送给该对象。如果需要改 Servlet 再次为客户端服务，容器将会重新产生一个 Servlet 对象来处理客户端的请求。在 destroy() 方法调用之后，容器会释放这个 Servlet对象，在随后的时间内，该对象会被 java 的垃圾收集器所回收。

4.`getServletConfig()`

该方法返回容器调用 init() 方法时传递给 Servlet 对象的 ServletConfig 对象，ServletConfig 对象包含了 Servlet 的初始化参数。

5.`getServletInfo()`

返回一个 String 类型的字符串，其中包括了关于 Servlet 的信息，例如，作者、版本和版权。该方法返回的应该是纯文本字符串，而不是任何类型的标记。

## 2、转发（forward）和重定向（redirect）的区别？
* forward 是服务器端行为, redirect 是客户端行为。
* forward 是客户端一次 request 请求, redirect 是客户端两次 request 请求。
* forward 不会刷新浏览器 URL 地址, redirect 会刷新浏览器 URL 地址, 显示的是当前页面的 URL。
* forward 无法请求本服务外的资源, redirect 可以请求本服务器外的资源。
* forward 跳转后要加上 return 语句, 因为页面跳转后还会执行跳转后面的语句。 redirect 则不需要。
* forward 页面间可以共享 request 和 response 对象, redirect 页面间无法共享。
* forward 比 redirect 的效率更高。

## 3、JSP有哪些内置对象？作用分别是什么？ 
- request：代表了客户端的请求信息，其中包含来自GET或POST请求的参数； 
- response：代表服务器对客户端的响应； 
- pageContext：通过该对象可以获取其他对象； 
- session：由服务器自动创建的与用户请求相关的对象； 
- application：封装服务器运行环境的对象，可将信息保存在服务器中，直到服务器关闭，否则 application 对象中保存的信息会在整个应用中都有效。与 session 对象相比，application 对象生命周期更长，类似于系统的 “全局变量” ； 
- out：输出服务器响应的输出流对象，用于在 Web                                浏览器内输出信息，并且管理应用服务器上的输出缓冲区； 
- config：Web应用的配置对象，主要作用是取得服务器的配置信息； 
- page：JSP页面本身（相当于Java程序中的this）； 
- exception：封装页面抛出异常的对象，作用是显示异常信息，只有在包含 isErrorPage="true" 的页面中才可以被使用，在一般的JSP页面中使用该对象将无法编译JSP文件。

## 4、Get 和 Post 的区别？
1. 根据 HTTP 规范 Get 用于信息获取, 而且应该是安全和幂等的。没有副作用。
    安全：指的是 Get 用于获取信息而非修改信息,即不会影响资源的状态。
    
    幂等: 指的是同一 URL 的多个请求应该返回同样的结果。但在实际中, 例如从新闻网站 Get 信息, 信息都是不同的,但也被认为是安全和幂等的,因为它总是返回当前的新闻。从根本上说，如果目标是当用户打开一个链接时，他可以确信从自身的角度来看没有改变资源即可。

2. 根据 HTTP 规范，POST 表示可能修改变服务器上的资源的请求。是不幂等的, 有副作用。

3. 在 HTML 中 Get 方式由于浏览器或服务器的限制,提交的数据长度有限。而理论上 Post 方式没有这个限制。

    > 注意：在 HTTP 协议中 Get 和 Post 方式长度并没有限制。

4. Get 方式发送的数据附加在 URL 上, 而 Post 方式则是存储在 消息体（Body）中。

5. Get 的请求，由于参数在 URL 中，刷新页面不会丢失，Post 刷新之后要重新提交。

> 注意：HTTP 是应用层协议, 不是传输协议。Get 和 Post 方式都是明文传输的, 都是不安全的。

## 5、Jsp 和 Servlet 的区别？

* Jsp 的本质是 Servlet，Jsp 在第一次运行时会被编译成 Servlet。
* Jsp 侧重的是页面的显示对应 MVC 模式中的 V（View）层。Servlet 侧重的是逻辑控制，对应 MVC 模式中的 C（Control）层。
* Jsp 有9大内置对象, Servlet 没有。
* Jsp 页面由 HTML代码 和 Jsp标签构成。Servlet 为纯 Java 代码。

## 6、实现会话跟踪的技术有哪些？

>由于HTTP协议本身是无状态的，服务器为了区分不同的用户，就需要对用户会话进行跟踪，简单的说就是为用户进行登记，为用户分配唯一的ID，下一次用户在请求中包含此ID，服务器据此判断到底是哪一个用户。 

* URL 重写：在URL中添加用户会话的信息作为请求的参数，或者将唯一的会话ID添加到URL结尾以标识一个会话。 

* 设置表单隐藏域：将和会话跟踪相关的字段添加到隐式表单域中，这些信息不会在浏览器中显示但是提交表单时会提交给服务器。 

>这两种方式很难处理跨越多个页面的信息传递，因为如果每次都要修改URL或在页面中添加隐式表单域来存储用户会话相关信息，事情将变得非常麻烦。 

* cookie：cookie有两种，一种是基于窗口的，浏览器窗口关闭后，cookie就没有了；另一种是将信息存储在一个临时文件中，并设置存在的时间。当用户通过浏览器和服务器建立一次会话后，会话ID就会随响应信息返回存储在基于窗口的cookie中，那就意味着只要浏览器没有关闭，会话没有超时，下一次请求时这个会话ID又会提交给服务器让服务器识别用户身份。会话中可以为用户保存信息。会话对象是在服务器内存中的，而基于窗口的cookie是在客户端内存中的。如果浏览器禁用了cookie，那么就需要通过下面两种方式进行会话跟踪。当然，在使用cookie时要注意几点：首先不要在cookie中存放敏感信息；其次cookie存储的数据量有限（4k），不能将过多的内容存储cookie中；再者浏览器通常只允许一个站点最多存放20个cookie。当然，和用户会话相关的其他信息（除了会话ID）也可以存在cookie方便进行会话跟踪。 

* HttpSession：在所有会话跟踪技术中，HttpSession对象是最强大也是功能最多的。当一个用户第一次访问某个网站时会自动创建HttpSession，每个用户可以访问他自己的HttpSession。可以通过HttpServletRequest对象的getSession方法获得HttpSession，通过HttpSession的setAttribute方法可以将一个值放在HttpSession中，通过调用HttpSession对象的getAttribute方法，同时传入属性名就可以获取保存在HttpSession中的对象。与上面三种方式不同的是，HttpSession放在服务器的内存中，因此不要将过大的对象放在里面，即使目前的Servlet容器可以在内存将满时将HttpSession中的对象移到其他存储设备中，但是这样势必影响性能。添加到HttpSession中的值可以是任意Java对象，这个对象最好实现了Serializable接口，这样Servlet容器在必要的时候可以将其序列化到文件中，否则在序列化时就会出现异常。

**补充：**HTML5中可以使用Web Storage技术通过JavaScript来保存数据，例如可以使用localStorage和sessionStorage来保存用户会话的信息，也能够实现会话跟踪。

